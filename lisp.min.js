var node_environment=!1,vm=null;"undefined"!=typeof module&&(vm=require("vm"),node_environment=!0);var $List,car,cdr,cons,list,list_module,__slice=[].slice;
list_module=function(){var s,t,d;s=function(d,f){this.first=d;this.rest=f;return null};s.prototype.length=function(){var d;d=function(f,p){return null===f?p:d(f.rest,p+1)};return d(this,0)};s.prototype.toString=function(){var d;d=function(f,p){return null===f?p+")":f instanceof s?d(f.rest,p+(null===f.first?"()":f.first.toString())+(null===f.rest?"":", ")):p.slice(0,-2)+" . "+f.toString()+")"};return d(this,"(")};s.prototype.reverse=function(){var d;d=function(f,p){return f instanceof s?d(f.rest,t(f.first,
p)):null===f?p:t(f,p)};return d(this,null)};s.prototype.slice=function(d,f){var p,s,w;null==f&&(f=null);if(null===f)return 0>d&&(d=this.length()+d),s=function(d,f){return 0===f?d:s(d.rest,f-1)},s(this,d);if(0>d||0>f)p=this.length(),d=0>d?p+d:d,f=0>f?p+f:f;w=function(d,f,p){return 0===f?0===p||null===d?null:t(d.first,w(d.rest,f,p-1)):w(d.rest,f-1,p)};return w(this,d,f-d)};s.prototype.ref=function(d){var f;0>d&&(d=this.length()+d);f=function(d,u){return null===d?null:0===u?d.first:f(d.rest,u-1)};return f(this,
d)};s.prototype.append=function(){var u,f;f=1<=arguments.length?__slice.call(arguments,0):[];f=d.apply(d,f);u=function(d,f){return null===d?f:t(d.first,u(d.rest,f))};return u(this,f)};s.prototype.toArray=function(){var d,f;d=[];f=function(p){if(null===p)return d;d.push(p.first);return f(p.rest)};return f(this)};s.prototype.forEach=function(d){var f;f=function(p){if(null===p)return null;d(p.first);return f(p.rest)};return f(this)};s.prototype.foreach=s.prototype.forEach;s.prototype.map=function(d){var f;
f=function(p){return null===p?null:t(d(p.first),f(p.rest))};return f(this)};s.prototype.filter=function(d){var f;f=function(p){return null===p?null:d(p.first)?t(p.first,f(p.rest)):f(p.rest)};return f(this)};t=function(d,f){return new s(d,f)};d=function(){var d,f;d=1<=arguments.length?__slice.call(arguments,0):[];f=function(d,s){return s===d.length?null:t(d[s],f(d,s+1))};return f(d,0)};return{list:d,cons:t,List:s,car:function(d){return d.first},cdr:function(d){return d.rest}}}();$List=list_module.List;
list=list_module.list;cons=list_module.cons;car=list_module.car;cdr=list_module.cdr;"undefined"!==typeof module&&(module.exports.$List=$List,module.exports.list=list,module.exports.cons=cons,module.exports.car=car,module.exports.cdr=cdr);
var lisp_module=function(){var s,t,d,u,f={},p="",B=null,w=0,C=function(a,e){return null===a?e instanceof $List||null===e?e:cons(e,null):cons(a.first,C(a.rest,e))};node_environment?B=vm.createContext({cons:cons,car:car,cdr:cdr,list:list,$List:$List,append:C,console:console}):window.append=C;s=function(a){for(var e=[],d=0,c=0;c<a.length;c++)if("("===a[c])e.push("("),d++;else if("["===a[c]){if(0!==c&&" "!==a[c-1]&&"\n"!==a[c-1]&&"\t"!==a[c-1]&&"'"!==a[c-1]&&"`"!==a[c-1]&&"~"!==a[c-1]&&"("!==a[c-1]&&
"{"!==a[c-1]&&"["!==a[c-1])if(b=e.length-1,g=")"===e[b]?1:0,0===g)e.push("get"),e.push(e[b]),e[b]="(";else{e.push("");e.push("");e[b+2]=e[b];for(--b;;){e[b+2]=e[b];")"===e[b]&&g++;"("===e[b]&&g--;if(0===g)break;b--}e[b]="(";e[b+1]="get"}else e.push("("),e.push("Array");d++}else if("{"===a[c])e.push("("),e.push("Object"),d++;else if(")"===a[c]||"]"===a[c]||"}"===a[c])e.push(")"),d--;else if(" "!==a[c]&&"\n"!==a[c]&&"\t"!=a[c]&&","!=a[c])if("~"===a[c]&&"@"===a[c+1])e.push("~@"),c++;else if("`"===a[c]||
"~"===a[c]||"'"===a[c])e.push(a[c]);else if(";"===a[c])for(;c!=a.length&&"\n"!==a[c];)c++;else if('"'===a[c]){for(var l=c+1;l!=a.length;)if("\\"===a[l])l+=2;else{if('"'===a[l])break;l++}e.push(a.slice(c,l+1));c=l}else{for(l=c+1;l!==a.length&&" "!==a[l]&&"\n"!==a[l]&&"\t"!==a[l]&&","!==a[l]&&")"!==a[l]&&"("!==a[l]&&"]"!==a[l]&&"["!==a[l]&&"{"!==a[l]&&"}"!==a[l]&&"'"!==a[l]&&"`"!==a[l]&&"~"!==a[l]&&";"!==a[l]&&":"!==a[l]&&"."!==a[l];)l+=1;var f=a.slice(c,l);if("."===f[0]&&")"===e[e.length-1]&&" "!==
a[c-1]&&"\n"!==a[c-1]&&"\t"!==a[c-1]){var g=1,b=e.length-1;e.push("");e.push("");e[b+2]=e[b];for(--b;;){e[b+2]=e[b];")"===e[b]&&g++;"("===e[b]&&g--;if(0===g)break;b--}e[b]="(";e[b+1]="get";e.push('"'+f.slice(1)+'"');e.push(")")}else"."===f[0]&&0<c&&" "!==a[c-1]&&"\t"!==a[c-1]&&"\n"!==a[c-1]&&"{"!==a[c-1]&&"("!==a[c-1]&&"}"!==a[c-1]&&")"!==a[c-1]?(c=e[e.length-1],e[e.length-1]="(",e.push("get"),e.push(c),e.push('"'+f.slice(1)+'"'),e.push(")")):"."===f[0]&&'"'===a[c-1]?e[e.length-1]+=f:e.push(f);c=
l-1}return 0!==d?null:e};t=function(a){var e={"'":"quote","~":"unquote","~@":"unquote-splice","`":"quasiquote"};if(null===a)return null;var d=null,c,f=null,n=null;for(c=a.length-1;0<=c;c--)")"===a[c]?(f=cons(d,f),d=null):"("===a[c]?(0===c||"~@"!==a[c-1]&&"'"!==a[c-1]&&"~"!==a[c-1]&&"`"!==a[c-1]?d=cons(d,car(f)):(d=cons(cons(e[a[c-1]],cons(d,null)),car(f)),c--),f=cdr(f)):(n=a[c],0===c||"~@"!==a[c-1]&&"'"!==a[c-1]&&"~"!==a[c-1]&&"`"!==a[c-1]?d=cons(n,d):(d=cons(cons(e[a[c-1]],cons(n,null)),d),c--));
return d};var E=function(a){if(null===a)return null;var d=a.first;return d instanceof $List?cons("cons",cons(E(d),cons(E(a.rest),null))):"string"===typeof d&&"."===d?cons("quote",cons(a.rest.first,null)):cons("cons",cons(cons("quote",cons(d,null)),cons(E(cdr(a)),null)))},x=function(a){for(var d="",k=0;k<a.length;k++)var c=a.charCodeAt(k),d=47<c&&58>c||64<c&&91>c||96<c&&123>c||"$"===a[k]||"_"===a[k]||"."===a[k]||"&"===a[k]||255<c?d+a[k]:d+("_$"+c+"_");isNaN(d[0])||(d="_"+d);return d},A=function(a){if(null===
a)return null;v=a.first;return v instanceof $List?"string"===typeof v.first&&"unquote"===v.first?cons("cons",cons(v.rest.first,cons(A(cdr(a)),null))):"string"==typeof v.first&&"unquote-splice"===v.first?cons("append",cons(v.rest.first,cons(A(a.rest),null))):cons("cons",cons(A(v),cons(A(a.rest),null))):"string"===typeof v&&"."===v?cons("quote",cons(a.rest.first,null)):cons("cons",cons(cons("quote",cons(v,null)),cons(A(a.rest),null)))},y=function(a,d,k){if(null===a&&null===d)return k;if(null===a&&null!==
d||null!==a&&null===d&&"."!==a.first)return 0;if(a.first instanceof $List&&d.first instanceof $List)return y(a.first,d.first,k)?y(a.rest,d.rest,k):0;if(a.first instanceof $List&&!(d.first instanceof $List))return 0;if("string"===typeof a.first&&"#"===a.first[0])return"string"!==typeof d.first?0:a.first.slice(1)===d.first?y(a.rest,d.rest,k):0;if("string"===typeof a.first&&"."===a.first)return k[a.rest.first]=d,k;k[a.first]=d.first;return y(a.rest,d.rest,k)},F=function(a,e){for(var k=function(a){if(null===
a)return null;if(a.first instanceof $List)return cons(cons("list",k(a.first)),k(a.rest));if('"'===a.first[0]){for(var b="",c=0;c<a.first.length;c++)b='"'===a.first[c]?b+'\\"':"\\"===a.first[c]?b+"\\\\":"\n"===a.first[c]?b+"\\n":"\t"===a.first[c]?b+"\\t":b+a.first[c];return cons('"'+b+'"',k(a.rest))}return null===a.first?cons(a.first,k(a.rest)):cons('"'+x(a.first)+'"',k(a.rest))};null!==a;){var c=y(a.first,e,{});if(c){var f="(function(){",n;for(n in c)f=c[n]instanceof $List?f+("var "+x(n)+" = "+d(cons("list",
k(c[n])))+";"):null===c[n]?f+("var "+x(n)+" = null; "):f+("var "+x(n)+" = "+d('"'+c[n])+'";');f+="return ("+d(a.rest.first)+");";f+="})();";if(node_environment)try{return vm.runInContext(f,B,"lisp.vm")}catch(g){return console.log(g),""}else try{return window.eval(f)}catch(b){return console.log(b),""}}a=a.rest.rest}console.log("ERROR: Failed to expand macro\n");return""},D=function(a){for(var e="",f=!1;null!==a;){var c=a.first,c=d(c,null,null,null,!0);if("string"===typeof c&&":"===c[0])for(!1===f?
(e+="(",f=!0):e+=", ",e+="{"+c.slice(1)+": "+d(a.rest.first,null,null,null,!0),a=a.rest.rest;;){if(null===a){e+="}";break}c=d(a.first,null,null,null,!0);if(":"!==c[0]){e+="}, "+c;break}if(null===a.rest)return console.log("ERROR: Invalid parameter name"),"";var l=d(a.rest.first,null,null,null,!0),e=e+(", "+c.slice(1)+": "+l);a=a.rest.rest}else!1===f?(e+="(",f=!0):e+=", ",e+=c;if(null===a||null===a.rest)break;a=a.rest}f&&(e+=")");return 0===e.trim().length?"()":e},G=function(a){return x(a)===a&&isNaN(a)?
a:'"'+a+'"'},H=function(a){if('"'===a[0]||"."==a[0]){var d="."===a[0]?a.slice(1):a.slice(1,-1);return d===x(d)&&isNaN(d)?"."+d:"["+a+"]"}return"["+a+"]"};d=function(a,e,k,c,l,n){if(null===a)return c?"return null":"null";if(a instanceof $List){var g=car(a),b,q,r,h,m;if("def"===g||":="===g||"="===g||"set!"===g||"const"===g)return q=car(cdr(a)),r=null===cdr(cdr(a))?null:null!==cdr(cdr(cdr(a)))?cons("fn",cons(car(cdr(cdr(a))),cdr(cdr(cdr(a))))):a.rest.rest.first,q=d(q),r=d(r,null,null,null,!0,q),b=("def"===
g||":="===g?"var ":"const"===g?"const ":"")+q+" = "+r+" ",c?b+"; return "+q:b;if("Array"===g){b=c?"return [":"[";for(a=cdr(a);null!==a;)b+=d(car(a),null,null,null,!0),null!==cdr(a)&&(b+=", "),a=cdr(a);return b+"]"}if("Object"===g){b=c?"return {":"{";for(a=a.rest;null!==a;){h=d(a.first,null,null,null,!0);if(":"===h[0])if(null!==a.rest&&":"!==a.rest.first[0])c=G(h.slice(1)),b+=c+": ";else{b+=h.slice(1)+(null===a.rest?"":", ");a=a.rest;continue}else b="'"===h[0]||'"'===h[0]?b+(h+": "):b+("["+h+"]: ");
c=d(a.rest.first,null,null,null,!0);b+=c;null!==a.rest.rest&&(b+=", ");a=a.rest.rest}return b+="}"}if("quote"===g||"quasiquote"===g)return a.rest.first instanceof $List?(e=d("quote"===g?E(a.rest.first):A(a.rest.first)),c?"return "+e:e):null===a.rest?c?"return null":"null":isNaN(a.rest.first)?(b='"'===a.rest.first[0]?a.rest.first:'"'+a.rest.first+'"',c?"return "+b:b):c?"return "+a.rest.first:a.rest.first;if("fn"===g||"fn*"===g||"\u03bb"===g||"\u03bb*"===g||"=>"===g){b="fn"===g||"\u03bb"===g?"function":
"fn*"===g||"\u03bb*"===g?"function*":"";c&&(b="return "+b);c="";"string"===typeof a.rest.first?(n=a.rest.first,c+=a.rest.first+"(",m=a.rest.rest.first,a=a.rest.rest.rest):(c+="(",m=a.rest.first,a=a.rest.rest);l=[];var s={};e=0;for(var t=!1,z=null;null!==m;)if(k=m.first,"string"!==typeof k){if("Object"!==k.first)return console.log("ERROR: Invalid parameters"),"";e++;for(k=k.rest;null!==k;)q=d(k.first),q='"'===q[0]?q.slice(1,-1):q,q=":"===q[0]?q.slice(1):q,r=d(k.rest.first,null,null,null,!0),s[q]=r,
k=k.rest.rest;c+="__lisp_args__";m=m.rest;null!==m&&"&"!==m.first&&"."!==m.first&&(c+=", ");l.push(s)}else{k=d(k);if("&"===k){e++;z=d(m.rest.first);break}else if("."===k){e++;m=m.rest;z=d(m.first);t=!0;break}else if(":"===k[0]){e++;k=k.slice(1);c+=k;l.push([k,d(m.rest.first,null,null,null,!0)]);m=m.rest.rest;null!==m&&"&"!==m.first&&"."!==m.first&&(c+=", ");continue}else e++,c+=k,null!==m.rest&&"&"!==m.rest.first&&"."!==m.rest.first&&(c+=", ");m=m.rest}k=[n?n:!1];c="=>"===g?c+")=>{":c+"){";z&&(c+=
"for(var "+z+" = [], $__0 = "+(e-1)+"; $__0 < arguments.length; $__0++)"+z+"[$__0 - "+(e-1)+"] = arguments[$__0];",t&&(c+=z+" = list.apply(null, "+z+");"));for(r=0;r<l.length;r++)if(e=l[r],e.constructor===Array)q=e[0],c+=q+" = ("+q+" === void 0 ? "+e[1]+" : "+q+" );";else for(h in c+="var __lisp_args_v__;",c+="__lisp_args__ = (__lisp_args__ === void 0 ? {} : __lisp_args__); ",e)c+="var "+h+" = ((__lisp_args_v__ = __lisp_args__."+h+") === void 0 ? "+e[h]+" : __lisp_args_v__); ";c+=u(a,!0,null,k);!1!==
k[0]&&k[0]!==n&&(b+=k[0]);return b+(c+"}")}if("let"===g){n={};m=cdr(a);for(b="((function(){";null!==m.rest;)q=m.first,k=m.rest.first,typeof("string"===q)?q in n?b+=q+" = "+d(k)+";":(n[q]=!0,b+="var "+q+" = "+d(k)+";"):console.log("let implementation not finished yet"),m=m.rest.rest;b+=d(m.first,null,null,!0);b+="})())";return(c?"return ":"")+b}if("cond"===g){e=!1;h=a.rest;b="if(";l&&(b="(function(){"+b);r=d(h.first,null,null,null,!0,null);b=b+r+"){";a=h.rest.first;b+=d(a,!0,k,c||l,null,n);b+="}";
for(h=h.rest.rest;null!==h;)if(b+=" else ","else"!==h.first)b+="if (",r=d(h.first,null,null,null,!0),b=b+r+"){",a=h.rest.first,b+=d(a,!0,k,c||l,null,n),b+="}",h=h.rest.rest;else{e=!0;b+="{";a=h.rest.first;b+=d(a,!0,k,c||l,null,n);b+="}";break}!1===e&&c&&(b+=" else return null");l&&(b+="})()");return b}if("if"===g)return b="(",r=a.rest.first,n=a.rest.rest.first,a=null===a.rest.rest.rest?null:a.rest.rest.rest.first,l?(b+=d(r,null,null,null,!0)+" ? ",b+=d(n,e,k,null,!0,null)+" : ",b+=d(a,e,k,null,!0,
null)+")"):null===a?d(list("cond",r,n),e,k,c,l):d(list("cond",r,n,"else",a),e,k,c,l);if("do"===g)return l?"(function (){"+u(a.rest,!0)+"})()":u(a.rest,c,null,k);if("apply"===g)return h=d(a.rest.first),m=d(a.rest.rest.first,null,null,null,!0),(c?"return ":"")+"("+h+").apply(this, (function(){var temp = "+m+"; return temp instanceof $List ? temp.toArray() : temp})())";if("new"===g)return h=d(a.rest.first),b="(new "+h+""+D(a.rest.rest),b+=")",(c?"return ":"")+b;if("+"===g||"-"===g||"*"===g||"/"===g||
"%"===g||"=="===g||"<"===g||">"===g||"!="===g||"<="===g||">="===g||"&&"===g||"||"===g||"&"===g||"|"===g||"and"===g||"or"===g){b="(";m=a.rest;if(null===m.rest)return"+"===g||"*"===g||"%"===g?(c?"return ":"")+d(m.first,null,null,null,!0):"-"===g?(c?"return ":"")+"(-"+d(m.first,null,null,null,!0)+")":"/"===g?(c?"return ":"")+"(1/"+d(m.first,null,null,null,!0)+")":(c?"return ":"")+"true";k=d(m.first,null,null,null,!0);b+=k;for(m=m.rest;null!==m;)k=d(m.first,null,null,null,!0),"and"===g?g="&&":"or"===
g?g="||":"=="==g&&(g="==="),b+=" "+g+" ",b+=k,null===m.rest||"==="!==g&&"<"!==g&&">"!==g&&"!="!==g&&"<="!==g&&">="!==g||(b+=" && "+k),m=m.rest;return(c?"return ":"")+b+")"}if("case"===g){e=!1;b=a.rest.first;b=d(b,null,null,null,!0);h=a.rest.rest;b="switch ("+b+"){";for(l&&(b="(function(){"+b);null!==h;)if("else"!==h.first)b+=" case ",r=d(h.first,null,null,null,!0),b+=r+":",a=h.rest.first,b+=d(a,!0,k,c||l,null,n),b+=";"===b[b.length-1]?"":";",c||l||(b+=" break;"),h=h.rest.rest;else{e=!0;b+=" default: ";
a=h.rest.first;b+=d(a,!0,k,c||l,null,n);b+=";"===b[b.length-1]?"":";";c||l||(b+=" break;");break}!1===e&&c&&(b+=" default: return null;");b+="}";l&&(b+="})()");return b}if("not"===g)return(c?"return ":"")+"(!"+d(a.rest.first,null,null,null,!0)+")";if("instanceof"===g)return(c?"return ":"")+"("+d(a.rest.first)+" instanceof "+d(a.rest.rest.first)+")";if("get"===g){e=d(a.rest.first,null,null,null,!0);"super"===e&&(e="this.__super__");b=e;for(n=a.rest.rest;null!==n;)h=d(n.first,null,null,null,!0),b+=
H(h),n=n.rest;return(c?"return ":"")+b}if("->"===g){e=d(a.rest.first,null,null,null,!0);"super"===e&&(e="this.__super__");b=e;for(n=a.rest.rest;null!==n;)k=!1,n.first instanceof $List?(k=!0,h=d(n.first.first,null,null,null,!0)):h=d(n.first,null,null,null,!0),b+=H(h),k&&(m=n.first.rest,b+=D(m)),n=n.rest;return(c?"return ":"")+b}if("loop"===g){b=[];m=[];for(h=a.rest;null!==h.rest;)q=d(h.first),r=d(h.rest.first,null,null,null,!0),b.push(q),m.push(r),h=h.rest.rest;g=q=null;for(r=b.length-1;0<=r;r--)q=
cons(b[r],q),g=cons(m[r],g);a=h.first;return d(cons(list("fn",q,a),g),e,k,c,l,n)}if("try"===g)return h=a.rest,a=h.first,b="try{"+d(a,!0,k,c||l,null,n),b+="}",h=h.rest,null!==h&&"catch"===h.first&&(b+="catch(",a=d(h.rest.first),b+=a+"){",a=h.rest.rest.first,b+=d(a,!0,k,c||l,null,n),b+="}",h=h.rest.rest.rest),null!==h&&"finally"===h.first&&(a=h.rest.first,b+="finally {",b+=d(a,!0,k,c||l,null,n),b+="}"),b;if("throw"===g||"yield"===g)return g+" "+d(a.rest.first,null,null,null,!0)+(c?"; return;":"");if("in"===
g)return(c?"return ":"")+"("+d(a.rest.first)+" in "+d(a.rest.rest.first)+")";if("class"===g){n=a.rest.first;h=k=null;b=n+".prototype = {constructor: "+n+"";"extends"===a.rest.rest.first&&(h=a.rest.rest.rest.first,a=a.rest.rest,b+=", __proto__: "+h+".prototype");for(a=a.rest.rest;null!==a;){h=d(a.first,null,null,null,!0);if(":"===h[0])if(h=G(h.slice(1)),"constructor"===h){if(null!==k)return console.log("ERROR: redefine the constructor for class "+n),"";k=a.rest.first;a=a.rest.rest;continue}else b+=
", ",b+=h+": ";else"'"===h[0]||'"'===h[0]?(b+=", ",b+=h+": "):(b+=", ",b+="["+h+"]: ");r=d(a.rest.first,null,null,null,!0);b+=r;a=a.rest.rest}b+="};";null!==k&&(q=d(list("def",n,k)));b=q+";"+b;return c?b+"; return "+n+";":l?"(function(){"+b+" return "+n+";}())":b}if("defmacro"===g){b=d(a.rest.first);if("string"!=typeof b)return console.log("ERROR: Invalid macro name: "+b.toString()),"";h=a.rest.rest;f[b]=h;return""}if("macro-expand"===g){b=a.rest.first;c=a.rest.rest;n=d(b);if(node_environment)try{p=
vm.runInContext(n,B,"lisp.vm"),c=null===c?-1:vm.runInContext(c.first,B,"lisp.vm")}catch(y){console.log(y)}else try{p=window.eval(n),c=null===c?-1:window.eval(c.first)}catch(C){console.log(C)}if(p.first in f){b=p;for(r=0;;){b=F(f[b.first],b.rest);if(null===b||!(b.first in f))break;r++;if(r===c)break}return d(list("quote",b),null,null,null,l)}console.log("ERROR: macro-expand invalid macro: "+b.toString());return""}h=a.first;m=a.rest;h=d(h,null,null,null,!0);if("recur"===h&&e)!1===k[0]&&(k[0]="__lisp__recur__$"+
w,w+=3),h=k[0],a.first=h;else{if("super"===h)return m=D(m),b="Object.defineProperty(this, '__super__', {value: this.__proto__.__proto__}); "+((c?"return ":"")+"this.__super__.constructor.call(this"+("()"===m?")":", "+m.slice(1)));if("string"===typeof h&&"this.__super__."===h.slice(0,15)||"this.__super__["===h.slice(0,15))return m=D(m),b="this.__super__"+h.slice(14)+".call(this"+("()"===m?")":", "+m.slice(1)),(c?"return ":"")+b}b=h;"}"!==h[h.length-1]&&isNaN(h)||(b="("+b+")");if(h in f)return b=F(f[h],
m),(c?"return ":"")+d(b,e,k,c,l,n);b+=D(m);return(c?"return ":"")+b}return isNaN(a)&&"'"!==a[0]&&'"'!==a[0]&&":"!==a[0]?(c?"return ":"")+x(a):(c?"return ":"")+a};u=function(a,e,f,c,l){for(var n="",g,b=!1;null!==a;){e&&null===a.rest&&(b=!0);g=d(a.first,null===a.rest?!0:!1,c,b);"string"===typeof g&&(g=g.trim());"string"===typeof g&&0!==g.length&&";"!==g[g.length-1]&&(g+=";");if(f)if(node_environment)try{p=vm.runInContext(g,B,"lisp.vm"),l&&console.log(p)}catch(q){console.log(q)}else try{p=window.eval(g),
l&&console.log(p)}catch(r){console.log(r)}n+=g;a=a.rest}return n};return{lexer:s,parser:t,compiler:d,lisp_compiler:u,compile:function(a,d){var f=s(a);if(null===f)return null;f=t(f);return u(f,!1,!0,null,d)},getEvalResult:function(){return p}}},lisp=lisp_module();"undefined"!==typeof module&&(module.exports.compile=lisp.compile,module.exports.getEvalResult=lisp.getEvalResult);
