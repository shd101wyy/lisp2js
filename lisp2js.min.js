var node_environment=!1,vm=null;"undefined"!=typeof module&&(vm=require("vm"),node_environment=!0);var $List,car,cdr,cons,list,list_module,slice=[].slice;
list_module=function(){var r,w,u;r=function(f,e){this.first=f;this.rest=e;return null};r.prototype.length=function(){var f;f=function(e,d){return null===e?d:f(e.rest,d+1)};return f(this,0)};r.prototype.toString=function(){function f(e,d){return null===e?d+")":e instanceof r?f(e.rest,d+(null===e.first?"()":e.first instanceof Array?"["+e.first.toString()+"]":e.first.toString())+(null===e.rest?"":", ")):d.slice(0,-2)+" . "+e.toString()+")"}return f(this,"(")};r.prototype.reverse=function(){var f;f=function(e,
d){return e instanceof r?f(e.rest,w(e.first,d)):null===e?d:w(e,d)};return f(this,null)};r.prototype.slice=function(f,e){var d,r,u;void 0===e&&(e=null);if(null===e)return 0>f&&(f=this.length()+f),r=function(d,e){return 0===e?d:r(d.rest,e-1)},r(this,f);if(0>f||0>e)d=this.length(),f=0>f?d+f:f,e=0>e?d+e:e;u=function(d,e,f){return 0===e?0===f||null===d?null:w(d.first,u(d.rest,e,f-1)):u(d.rest,e-1,f)};return u(this,f,e-f)};r.prototype.ref=function(f){var e;0>f&&(f=this.length()+f);e=function(d,f){return null===
d?null:0===f?d.first:e(d.rest,f-1)};return e(this,f)};r.prototype.append=function(){var f,e;e=1<=arguments.length?slice.call(arguments,0):[];e=u.apply(u,e);f=function(d,e){return null===d?e:w(d.first,f(d.rest,e))};return f(this,e)};r.prototype.toArray=function(){var f,e;f=[];e=function(d){if(null===d)return f;f.push(d.first);return e(d.rest)};return e(this)};r.prototype.forEach=function(f){var e;e=function(d){if(null===d)return null;f(d.first);return e(d.rest)};return e(this)};r.prototype.foreach=
r.prototype.forEach;r.prototype.map=function(f){var e;e=function(d){return null===d?null:w(f(d.first),e(d.rest))};return e(this)};r.prototype.filter=function(f){var e;e=function(d){return null===d?null:f(d.first)?w(d.first,e(d.rest)):e(d.rest)};return e(this)};w=function(f,e){return new r(f,e)};u=function(){var f,e;f=1<=arguments.length?slice.call(arguments,0):[];e=function(d,f){return f===d.length?null:w(d[f],e(d,f+1))};return e(f,0)};return{list:u,cons:w,List:r,car:function(f){return f.first},cdr:function(f){return f.rest}}}();
$List=list_module.List;list=list_module.list;cons=list_module.cons;car=list_module.car;cdr=list_module.cdr;"undefined"!==typeof module&&(module.exports.$List=$List,module.exports.list=list,module.exports.cons=cons,module.exports.car=car,module.exports.cdr=cdr);
var lisp_module=function(){function r(a,h){for(var g=null,b=a.length-1;0<=b;b--)var d=a[b],g="number"===typeof d?cons(d,g):"string"===typeof d&&'"'===d[0]?cons(d,g):"string"===typeof d?cons('"'+d+'"',g):d instanceof Array?cons(r(d),g):d instanceof $List?"unquote"===d.first&&h===u?cons(d.rest.first,g):cons(h(d),g):cons(d,g);return g}function w(a){if(null===a)return null;var h=a.first;return h instanceof $List?cons("cons",cons(w(h),cons(w(a.rest),null))):"string"===typeof h&&"."===h?cons("quote",cons(a.rest.first,
null)):h instanceof Array?cons("cons",cons(cons("Array",r(h,w)),cons(w(a.rest),null))):cons("cons",cons(cons("quote",cons(h,null)),cons(w(a.rest),null)))}function u(a){if(null===a)return null;v=a.first;return v instanceof $List?"string"===typeof v.first&&"unquote"===v.first?cons("cons",cons(v.rest.first,cons(u(cdr(a)),null))):"string"==typeof v.first&&"unquote-splice"===v.first?cons("append",cons(v.rest.first,cons(u(a.rest),null))):cons("cons",cons(u(v),cons(u(a.rest),null))):"string"===typeof v&&
"."===v?cons("quote",cons(a.rest.first,null)):v instanceof Array?cons("cons",cons(cons("Array",r(v,u)),cons(w(a.rest),null))):cons("cons",cons(cons("quote",cons(v,null)),cons(u(a.rest),null)))}var f,e,d,A,B={},x="",D=null,G=0,C=function(a,h){return null===a?h instanceof $List||null===h?h:cons(h,null):cons(a.first,C(a.rest,h))};node_environment?D=vm.createContext({cons:cons,car:car,cdr:cdr,list:list,$List:$List,append:C,console:console}):window.append=C;f=function(a){for(var h=[],d=0,b=0;b<a.length;b++)if("("===
a[b])h.push("("),d++;else if("["===a[b]){if(0!==b&&" "!==a[b-1]&&"\n"!==a[b-1]&&"\t"!==a[b-1]&&"'"!==a[b-1]&&"`"!==a[b-1]&&"~"!==a[b-1]&&"("!==a[b-1]&&"{"!==a[b-1]&&"["!==a[b-1])if(k=h.length-1,l=")"===h[k]?1:0,0===l)h.push("get"),h.push(h[k]),h[k]="(";else{h.push("");h.push("");h[k+2]=h[k];for(--k;;){h[k+2]=h[k];")"===h[k]&&l++;"("===h[k]&&l--;if(0===l)break;k--}h[k]="(";h[k+1]="get"}else h.push("("),h.push("Array");d++}else if("{"===a[b])h.push("("),h.push("Object"),d++;else if(")"===a[b]||"]"===
a[b]||"}"===a[b])h.push(")"),d--;else if(" "!==a[b]&&"\n"!==a[b]&&"\t"!=a[b]&&","!=a[b])if("~"===a[b]&&"@"===a[b+1])h.push("~@"),b++;else if("`"===a[b]||"~"===a[b]||"'"===a[b])h.push(a[b]);else if(";"===a[b])for(;b!=a.length&&"\n"!==a[b];)b++;else if('"'===a[b]){for(var q=b+1;q!=a.length;)if("\\"===a[q])q+=2;else{if('"'===a[q])break;q++}h.push(a.slice(b,q+1));b=q}else{for(q=b+1;q!==a.length&&" "!==a[q]&&"\n"!==a[q]&&"\t"!==a[q]&&","!==a[q]&&")"!==a[q]&&"("!==a[q]&&"]"!==a[q]&&"["!==a[q]&&"{"!==a[q]&&
"}"!==a[q]&&"'"!==a[q]&&"`"!==a[q]&&"~"!==a[q]&&";"!==a[q]&&":"!==a[q]&&"."!==a[q];)q+=1;var e=a.slice(b,q);if("."===e[0]&&")"===h[h.length-1]&&" "!==a[b-1]&&"\n"!==a[b-1]&&"\t"!==a[b-1]){var l=1,k=h.length-1;h.push("");h.push("");h[k+2]=h[k];for(--k;;){h[k+2]=h[k];")"===h[k]&&l++;"("===h[k]&&l--;if(0===l)break;k--}h[k]="(";h[k+1]="get";h.push('"'+e.slice(1)+'"');h.push(")")}else"."===e[0]&&0<b&&" "!==a[b-1]&&"\t"!==a[b-1]&&"\n"!==a[b-1]&&"{"!==a[b-1]&&"("!==a[b-1]&&"}"!==a[b-1]&&")"!==a[b-1]?(b=
h[h.length-1],h[h.length-1]="(",h.push("get"),h.push(b),h.push('"'+e.slice(1)+'"'),h.push(")")):"."===e[0]&&'"'===a[b-1]?h[h.length-1]+=e:h.push(e);b=q-1}return 0!==d?null:h};e=function(a){var d={"'":"quote","~":"unquote","~@":"unquote-splice","`":"quasiquote"};if(null===a)return null;var g=null,b,e=null,f=null;for(b=a.length-1;0<=b;b--)if(")"===a[b])e=cons(g,e),g=null;else if("("===a[b]){if(0===b||"~@"!==a[b-1]&&"'"!==a[b-1]&&"~"!==a[b-1]&&"`"!==a[b-1])if(null!==g&&"Array"===g.first){f=[];for(g=
g.rest;null!==g;)f.push(g.first),g=g.rest;g=cons(f,car(e))}else g=cons(g,car(e));else g=cons(cons(d[a[b-1]],cons(g,null)),car(e)),b--;e=cdr(e)}else f=a[b],0===b||"~@"!==a[b-1]&&"'"!==a[b-1]&&"~"!==a[b-1]&&"`"!==a[b-1]?g=cons(f,g):(g=cons(cons(d[a[b-1]],cons(f,null)),g),b--);return g};var y=function(a){for(var d="",g=0;g<a.length;g++)var b=a.charCodeAt(g),d=47<b&&58>b||64<b&&91>b||96<b&&123>b||"$"===a[g]||"_"===a[g]||"."===a[g]||"&"===a[g]||255<b?d+a[g]:d+("_$"+b+"_");isNaN(d[0])||(d="_"+d);return d},
F=function(a,d,g){for(var b=0;;){if(b===a.length&&b===d.length)return g;if(b===a.length&&b!==d.length||b!==a.length&&b===d.length&&"."!==a[b])return 0;if(a[b]instanceof Array&&d[b]instanceof Array){if(!F(a[b],d[b],g))return 0;b+=1}else{if(a[b]instanceof Array&&!(d[b]instanceof Array))return 0;if("string"===typeof a[b]&&"#"===a[b][0])if("string"===typeof d[b]&&a[b].slice(1)===d[b])b+=1;else return 0;else{if("string"===typeof a[b]&&"."===a[b])return g[a[b+1]]=d,g;g[a[b]]=d[b];b+=1}}}},H=function(a,
h){h=h.toArray();for(var g=function(a){if(null===a)return null;if(a.first instanceof $List)return cons(cons("list",g(a.first)),g(a.rest));if('"'===a.first[0]){for(var b="",d=0;d<a.first.length;d++)b='"'===a.first[d]?b+'\\"':"\\"===a.first[d]?b+"\\\\":"\n"===a.first[d]?b+"\\n":"\t"===a.first[d]?b+"\\t":b+a.first[d];return cons('"'+b+'"',g(a.rest))}return null===a.first?cons(a.first,g(a.rest)):cons('"'+y(a.first)+'"',g(a.rest))};null!==a;){var b=F(a.first,h,{});if(b){var e="(function(){",f;for(f in b)e=
b[f]instanceof $List?e+("var "+y(f)+" = "+d(cons("list",g(b[f])))+";"):null===b[f]?e+("var "+y(f)+" = null; "):e+("var "+y(f)+" = "+d('"'+b[f])+'";');e+="return ("+d(a.rest.first)+");";e+="})();";if(node_environment)try{return vm.runInContext(e,D,"lisp.vm")}catch(l){return console.log(l),""}else try{return window.eval(e)}catch(k){return console.log(k),""}}a=a.rest.rest}console.log("ERROR: Failed to expand macro\n");return""},E=function(a){for(var h="",g=!1;null!==a;){var b=a.first,b=d(b,null,null,
null,!0);if("string"===typeof b&&":"===b[0])for(!1===g?(h+="(",g=!0):h+=", ",h+="{"+b.slice(1)+": "+d(a.rest.first,null,null,null,!0),a=a.rest.rest;;){if(null===a){h+="}";break}b=d(a.first,null,null,null,!0);if(":"!==b[0]){h+="}, "+b;break}if(null===a.rest)return console.log("ERROR: Invalid parameter name"),"";var e=d(a.rest.first,null,null,null,!0),h=h+(", "+b.slice(1)+": "+e);a=a.rest.rest}else!1===g?(h+="(",g=!0):h+=", ",h+=b;if(null===a||null===a.rest)break;a=a.rest}g&&(h+=")");return 0===h.trim().length?
"()":h},I=function(a){return y(a)===a&&isNaN(a)?a:'"'+a+'"'},J=function(a){if('"'===a[0]||"."==a[0]){var d="."===a[0]?a.slice(1):a.slice(1,-1);return d===y(d)&&isNaN(d)?"."+d:"["+a+"]"}return"["+a+"]"};d=function(a,h,g,b,e,f){var l;if(null===a)return b?"return null":"null";if(a instanceof Array){c=b?"return [":"[";for(l=0;l<a.length;l++)c+=d(a[l],null,null,null,!0),l!==a.length-1&&(c+=", ");return c+"]"}if(a instanceof $List){var k=car(a),c,t,p,m,n;if("def"===k||":="===k||"set!"===k||"const"===k)return t=
car(cdr(a)),p=null===cdr(cdr(a))?null:null!==cdr(cdr(cdr(a)))?cons("fn",cons(car(cdr(cdr(a))),cdr(cdr(cdr(a))))):a.rest.rest.first,t=d(t),p=d(p,null,null,null,!0,t),c=("def"===k||":="===k?"var ":"const"===k?"const ":"")+t+" = "+p+" ",b?c+"; return "+t:c;if("Array"===k){c=b?"return [":"[";for(a=cdr(a);null!==a;)c+=d(car(a),null,null,null,!0),null!==cdr(a)&&(c+=", "),a=cdr(a);return c+="]"}if("Object"===k){c=b?"return {":"{";for(a=a.rest;null!==a;){m=d(a.first,null,null,null,!0);if(":"===m[0])if(null!==
a.rest&&":"!==a.rest.first[0])b=I(m.slice(1)),c+=b+": ";else{c+=m.slice(1)+(null===a.rest?"":", ");a=a.rest;continue}else c="'"===m[0]||'"'===m[0]?c+(m+": "):c+("["+m+"]: ");b=d(a.rest.first,null,null,null,!0);c+=b;null!==a.rest.rest&&(c+=", ");a=a.rest.rest}return c+="}"}if("quote"===k||"quasiquote"===k)return a.rest.first instanceof $List?(p=d("quote"===k?w(a.rest.first):u(a.rest.first)),b?"return "+p:p):null===a.rest?b?"return null":"null":isNaN(a.rest.first)?(c='"'===a.rest.first[0]?a.rest.first:
'"'+a.rest.first+'"',b?"return "+c:c):b?"return "+a.rest.first:a.rest.first;if("defn"===k||"fn"===k||"fn*"===k||"\u03bb"===k||"\u03bb*"===k||"=>"===k){c="defn"===k||"fn"===k||"\u03bb"===k?"function ":"fn*"===k||"\u03bb*"===k?"function* ":"";b&&(c="return "+c);b="";"string"===typeof a.rest.first?(f=a.rest.first,b+=a.rest.first+"(",n=a.rest.rest.first,a=a.rest.rest.rest):(b+="(",n=a.rest.first,a=a.rest.rest);e=[];var r={};h=0;var C=!1,z=null;if(!(n instanceof Array))throw"Invalid experssion: ";for(l=
0;l<n.length;l++)if(g=n[l],"string"!==typeof g){if("Object"!==g.first)throw"ERROR: Invalid parameters";h++;for(g=g.rest;null!==g;)t=d(g.first),t='"'===t[0]?t.slice(1,-1):t,t=":"===t[0]?t.slice(1):t,p=d(g.rest.first,null,null,null,!0),r[t]=p,g=g.rest.rest;b+="__lisp_args__";l<n.length-1&&l+1<n.length&&"&"!==n[l+1]&&"."!==n[l+1]&&(b+=", ");e.push(r)}else if(g=d(g),"&"===g){h++;z=d(n[l+1]);break}else if("."===g){h++;z=d(n[l+1]);C=!0;break}else":"===g[0]?(h++,g=g.slice(1),b+=g,e.push([g,d(n[l+1],null,
null,null,!0)]),l+=1):(h++,b+=g),l<n.length-1&&l+1<n.length&&"&"!==n[l+1]&&"."!==n[l+1]&&(b+=", ");g=[f?f:!1];b="=>"===k?b+")=>{":b+"){";z&&(b+="for(var "+z+" = [], $__0 = "+(h-1)+"; $__0 < arguments.length; $__0++)"+z+"[$__0 - "+(h-1)+"] = arguments[$__0];",C&&(b+=z+" = list.apply(null, "+z+");"));for(l=0;l<e.length;l++)if(p=e[l],p.constructor===Array)t=p[0],b+=t+" = ("+t+" === void 0 ? "+p[1]+" : "+t+" );";else for(m in b+="var __lisp_args_v__;",b+="__lisp_args__ = (__lisp_args__ === void 0 ? {} : __lisp_args__); ",
p)b+="var "+m+" = ((__lisp_args_v__ = __lisp_args__."+m+") === void 0 ? "+p[m]+" : __lisp_args_v__); ";b+=A(a,!0,null,g);!1!==g[0]&&g[0]!==f&&(c+=g[0]);return c+(b+"}")}if("let"===k){f={};g=a.rest.first;c="((function(){";for(l=0;l<g.length;l+=2)t=g[l],p=g[l+1],typeof("string"===t)?t in f?c+=t+" = "+d(p)+";":(f[t]=!0,c+="var "+t+" = "+d(p)+";"):console.log("let implementation not finished yet");c+=d(cons("do",a.rest.rest),null,null,!0);c+="})())";return(b?"return ":"")+c}if("cond"===k){p=!1;m=a.rest;
c="if(";e&&(c="(function(){"+c);l=d(m.first,null,null,null,!0,null);c=c+l+"){";a=m.rest.first;c+=d(a,!0,g,b||e,null,f);c+="}";for(m=m.rest.rest;null!==m;)if(c+=" else ","else"!==m.first)c+="if (",l=d(m.first,null,null,null,!0),c=c+l+"){",a=m.rest.first,c+=d(a,!0,g,b||e,null,f),c+="}",m=m.rest.rest;else{p=!0;c+="{";a=m.rest.first;c+=d(a,!0,g,b||e,null,f);c+="}";break}!1===p&&b&&(c+=" else return null");e&&(c+="})()");return c}if("if"===k)return c="(",l=a.rest.first,f=a.rest.rest.first,a=null===a.rest.rest.rest?
null:a.rest.rest.rest.first,e?(c+=d(l,null,null,null,!0)+" ? ",c+=d(f,h,g,null,!0,null)+" : ",c+=d(a,h,g,null,!0,null)+")"):null===a?d(list("cond",l,f),h,g,b,e):d(list("cond",l,f,"else",a),h,g,b,e);if("do"===k)return e?"(function (){"+A(a.rest,!0)+"})()":A(a.rest,b,null,g);if("apply"===k)return l=d(a.rest.first),n=d(a.rest.rest.first,null,null,null,!0),(b?"return ":"")+"("+l+").apply(this, (function(){var temp = "+n+"; return temp instanceof $List ? temp.toArray() : temp})())";if("new"===k)return l=
d(a.rest.first),c="(new "+l+""+E(a.rest.rest),c+=")",(b?"return ":"")+c;if("+"===k||"-"===k||"*"===k||"/"===k||"%"===k||"="===k||"<"===k||">"===k||"!="===k||"<="===k||">="===k||"&&"===k||"||"===k||"&"===k||"|"===k||"and"===k||"or"===k||"xor"===k){c="(";n=a.rest;if(null===n.rest)return"+"===k||"*"===k||"%"===k?(b?"return ":"")+d(n.first,null,null,null,!0):"-"===k?(b?"return ":"")+"(-"+d(n.first,null,null,null,!0)+")":"/"===k?(b?"return ":"")+"(1/"+d(n.first,null,null,null,!0)+")":(b?"return ":"")+
"true";g=d(n.first,null,null,null,!0);c+=g;for(n=n.rest;null!==n;)g=d(n.first,null,null,null,!0),"and"===k?k="&&":"or"===k?k="||":"="===k?k="===":"xor"===k&&(k="^"),c+=" "+k+" ",c+=g,null===n.rest||"==="!==k&&"<"!==k&&">"!==k&&"!="!==k&&"<="!==k&&">="!==k||(c+=" && "+g),n=n.rest;return(b?"return ":"")+c+")"}if("case"===k){p=!1;c=a.rest.first;c=d(c,null,null,null,!0);m=a.rest.rest;c="switch ("+c+"){";for(e&&(c="(function(){"+c);null!==m;)if("else"!==m.first)c+=" case ",l=d(m.first,null,null,null,!0),
c+=l+":",a=m.rest.first,c+=d(a,!0,g,b||e,null,f),c+=";"===c[c.length-1]?"":";",b||e||(c+=" break;"),m=m.rest.rest;else{p=!0;c+=" default: ";a=m.rest.first;c+=d(a,!0,g,b||e,null,f);c+=";"===c[c.length-1]?"":";";b||e||(c+=" break;");break}!1===p&&b&&(c+=" default: return null;");c+="}";e&&(c+="})()");return c}if("not"===k)return(b?"return ":"")+"(!"+d(a.rest.first,null,null,null,!0)+")";if("instanceof"===k)return(b?"return ":"")+"("+d(a.rest.first)+" instanceof "+d(a.rest.rest.first)+")";if("get"===
k){p=d(a.rest.first,null,null,null,!0);"super"===p&&(p="this.__super__");c=p;for(f=a.rest.rest;null!==f;)m=d(f.first,null,null,null,!0),c+=J(m),f=f.rest;return(b?"return ":"")+c}if("->"===k){p=d(a.rest.first,null,null,null,!0);"super"===p&&(p="this.__super__");c=p;for(f=a.rest.rest;null!==f;)g=!1,f.first instanceof $List?(g=!0,m=d(f.first.first,null,null,null,!0)):m=d(f.first,null,null,null,!0),c+=J(m),g&&(n=f.first.rest,c+=E(n)),f=f.rest;return(b?"return ":"")+c}if("loop"===k){c=[];n=[];m=a.rest.first;
a=a.rest.rest;for(l=0;l<m.length;l+=2)t=d(m[l]),p=d(m[l+1],null,null,null,!0),c.push(t),n.push(p);p=null;for(l=c.length-1;0<=l;l--)p=cons(n[l],p);return d(cons(cons("fn",cons(c,a)),p),h,g,b,e,f)}if("try"===k)return m=a.rest,a=m.first,c="try{"+d(a,!0,g,b||e,null,f),c+="}",m=m.rest,null!==m&&"catch"===m.first&&(c+="catch(",a=d(m.rest.first),c+=a+"){",a=m.rest.rest.first,c+=d(a,!0,g,b||e,null,f),c+="}",m=m.rest.rest.rest),null!==m&&"finally"===m.first&&(a=m.rest.first,c+="finally {",c+=d(a,!0,g,b||e,
null,f),c+="}"),c;if("throw"===k||"yield"===k)return k+" "+d(a.rest.first,null,null,null,!0)+(b?"; return;":"");if("in"===k)return(b?"return ":"")+"("+d(a.rest.first)+" in "+d(a.rest.rest.first)+")";if("class"===k){f=a.rest.first;p=g=null;c=f+".prototype = {constructor: "+f+"";"extends"===a.rest.rest.first&&(p=a.rest.rest.rest.first,a=a.rest.rest,c+=", __proto__: "+p+".prototype");for(a=a.rest.rest;null!==a;){m=d(a.first,null,null,null,!0);if(":"===m[0])if(m=I(m.slice(1)),"constructor"===m){if(null!==
g)return console.log("ERROR: redefine the constructor for class "+f),"";g=a.rest.first;a=a.rest.rest;continue}else c+=", ",c+=m+": ";else"'"===m[0]||'"'===m[0]?(c+=", ",c+=m+": "):(c+=", ",c+="["+m+"]: ");p=d(a.rest.first,null,null,null,!0);c+=p;a=a.rest.rest}c+="};";null!==g&&(l=d(list("def",f,g)));c=l+";"+c;return b?c+"; return "+f+";":e?"(function(){"+c+" return "+f+";}())":c}if("defmacro"===k){c=d(a.rest.first);if("string"!==typeof c)throw"ERROR: Invalid macro name: "+c.toString();m=a.rest.rest;
B[c]=m;return""}if("macroexpand"===k){c=a.rest.first;b=a.rest.rest;f=d(c);if(node_environment)try{x=vm.runInContext(f,D,"lisp.vm"),b=null===b?-1:vm.runInContext(b.first,D,"lisp.vm")}catch(F){console.log(F)}else try{x=window.eval(f),b=null===b?-1:window.eval(b.first)}catch(K){console.log(K)}if(x.first in B){c=x;for(l=0;;){c=H(B[c.first],c.rest);if(null===c||!(c.first in B))break;l++;if(l===b)break}return d(list("quote",c),null,null,null,e)}console.log("ERROR: macro-expand invalid macro: "+c.toString());
return""}l=a.first;n=a.rest;l=d(l,null,null,null,!0);if("recur"===l&&h)!1===g[0]&&(g[0]="__lisp__recur__$"+G,G+=3),l=g[0],a.first=l;else{if("super"===l)return n=E(n),c="Object.defineProperty(this, '__super__', {value: this.__proto__.__proto__}); "+((b?"return ":"")+"this.__super__.constructor.call(this"+("()"===n?")":", "+n.slice(1)));if("string"===typeof l&&"this.__super__."===l.slice(0,15)||"this.__super__["===l.slice(0,15))return n=E(n),c="this.__super__"+l.slice(14)+".call(this"+("()"===n?")":
", "+n.slice(1)),(b?"return ":"")+c}c=l;"}"!==l[l.length-1]&&isNaN(l)||(c="("+c+")");if(l in B)return c=H(B[l],n),(b?"return ":"")+d(c,h,g,b,e,f);c+=E(n);return(b?"return ":"")+c}return isNaN(a)&&"'"!==a[0]&&'"'!==a[0]&&":"!==a[0]?(b?"return ":"")+y(a):(b?"return ":"")+a};A=function(a,e,f,b,q){for(var r="",l,k=!1;null!==a;){e&&null===a.rest&&(k=!0);l=d(a.first,null===a.rest?!0:!1,b,k);"string"===typeof l&&(l=l.trim());"string"===typeof l&&0!==l.length&&";"!==l[l.length-1]&&(l+=";");if(f)if(node_environment)try{x=
vm.runInContext(l,D,"lisp.vm"),q&&console.log(x)}catch(c){console.log(c)}else try{x=window.eval(l),q&&console.log(x)}catch(t){console.log(t)}r+=l;a=a.rest}return r};return{lexer:f,parser:e,compiler:d,lisp_compiler:A,compile:function(a,d){var g=f(a);if(null===g)return null;g=e(g);return A(g,!1,!0,null,d)},getEvalResult:function(){return x}}},lisp=lisp_module();"undefined"!==typeof module&&(module.exports.compile=lisp.compile,module.exports.getEvalResult=lisp.getEvalResult);
